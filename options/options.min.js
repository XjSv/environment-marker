let exportFile=null;function onError(e){console.log(e)}function showMessage(e,t=!1){let o=t?"alert-danger":"alert-success";$(".outer-wrapper .message-container .alert").length?($(".outer-wrapper .message-container .alert").remove(),$(".outer-wrapper .message-container").append('<div class="alert '+o+' col-12">'+e+"</div>")):$(".outer-wrapper .message-container").append('<div class="alert '+o+' col-12">'+e+"</div>")}function saveSettings(e,t,o,r){let n=e,l=t,s=o,i=r;""!==n&&""!==l&&""!==s?browser.storage.local.get(n).then(e=>{Object.keys(e).length<1?storeSetting(n,l,s,i):showMessage("Marker for this URL already exists!",!0)},onError):showMessage(""===s?"Enter Label !":"Enter URL !",!0)}function storeSetting(e,t,o,r){browser.storage.local.set({[e]:[t,o,r]}).then(()=>{},onError)}function makeJsonExportFile(e){let t=new Blob([e],{type:"application/json"});return null!==exportFile&&window.URL.revokeObjectURL(exportFile),exportFile=window.URL.createObjectURL(t),exportFile}function exportConfig(){browser.storage.local.get(null).then(e=>{let t=Object.keys(e),o=[];if(t.length>0){for(let r of t)o.push({url:r,color:e[r][0],label:e[r][1],position:e[r][2]});let r=JSON.stringify(o),n=document.createElement("a");n.setAttribute("download","ribbons.json"),n.href=makeJsonExportFile(r),document.body.appendChild(n),window.requestAnimationFrame((function(){let e=new MouseEvent("click");n.dispatchEvent(e),document.body.removeChild(n),showMessage("Export successful!")}))}else showMessage("Nothing to export!",!0)},onError)}function importConfig(){let e=document.getElementById("importFile"),t=e.files[0];if(t){const o=new FileReader;o.addEventListener("load",(function(){let t=JSON.parse(o.result);t.length>0&&(t.forEach((function(e){saveSettings(e.url,e.color,e.label,e.position)})),showMessage("Imported successfully!")),$(".import-file-label").html("Choose file"),e.value=""})),o.readAsText(t)}else showMessage("Choose a file!")}$(document).ready(()=>{$(".export").click(()=>{exportConfig()}),$(".import").click(()=>{importConfig()}),$("#importFile").change(e=>{e.target.files.length&&$(".import-file-label").html(e.target.files[0].name)})});
//# sourceMappingURL=options.min.js.map
