let errorDuplicateMarker=browser.i18n.getMessage("errorDuplicateMarker"),errorLabelEmpty=browser.i18n.getMessage("errorLabelEmpty"),errorUrlEmpty=browser.i18n.getMessage("errorUrlEmpty"),noticeSuccessExport=browser.i18n.getMessage("noticeSuccessExport"),noticeSuccessImport=browser.i18n.getMessage("noticeSuccessImport"),errorNoRibbonsToExport=browser.i18n.getMessage("errorNoRibbonsToExport"),errorChooseFile=browser.i18n.getMessage("errorChooseFile"),inputChooseFile=browser.i18n.getMessage("inputChooseFile"),buttonExport=browser.i18n.getMessage("buttonExport"),buttonImport=browser.i18n.getMessage("buttonImport"),importWarning=browser.i18n.getMessage("importWarning"),errorImportLabelEmpty=browser.i18n.getMessage("errorImportLabelEmpty"),errorImportUrlEmpty=browser.i18n.getMessage("errorImportUrlEmpty"),errorImportColorEmpty=browser.i18n.getMessage("errorImportColorEmpty"),inputEnableRegExp=browser.i18n.getMessage("inputEnableRegExp"),noticeSettingSaved=browser.i18n.getMessage("noticeSettingSaved"),ariaLabelAlertClose=browser.i18n.getMessage("ariaLabelAlertClose"),optionsSettingsSection=browser.i18n.getMessage("optionsSettingsSection"),optionsExportImportSection=browser.i18n.getMessage("optionsExportImportSection"),inputFontLabel=browser.i18n.getMessage("inputFontLabel"),inputFontHelpText=browser.i18n.getMessage("inputFontHelpText"),inputRegExpHelpText=browser.i18n.getMessage("inputRegExpHelpText"),exportFile=null,languageCode=browser.i18n.getUILanguage(),languageCodeTwoChar=languageCode.split("-")[0];const markersKey="__em-markers__",searchModeKey="__em-search-mode__",fontKey="__em-font__",exportFileName="ribbons.json";function onError(e){console.log(e)}function showMessage(e,t=!1){let o=t?"alert-danger":"alert-success";$(".alert-dismissible").length&&$(".alert-dismissible").alert("close"),$(".outer-wrapper .message-container").append('<div class="alert '+o+' alert-dismissible fade show" role="alert">'+e+'<button type="button" class="close" data-dismiss="alert" aria-label="'+ariaLabelAlertClose+'"><span aria-hidden="true">&times;</span></button></div>'),window.setTimeout((function(){$(".alert-dismissible").alert("close")}),3e3)}function makeJsonExportFile(e){let t=new Blob([e],{type:"application/json"});return null!==exportFile&&window.URL.revokeObjectURL(exportFile),exportFile=window.URL.createObjectURL(t),exportFile}function exportConfig(){browser.storage.local.get(markersKey).then(e=>{let t=e[markersKey]||[],o=[];if(t.length>0){for(let e of t)o.push({url:e.settingUrl,color:e.settingColor,label:e.settingLabel,position:e.settingPosition,size:e.settingSize});let e=JSON.stringify(o),r=document.createElement("a");r.setAttribute("download","ribbons.json"),r.href=makeJsonExportFile(e),document.body.appendChild(r),window.requestAnimationFrame((function(){let e=new MouseEvent("click");r.dispatchEvent(e),document.body.removeChild(r),showMessage(noticeSuccessExport)}))}else showMessage(errorNoRibbonsToExport,!0)},onError)}function importConfig(){let e=document.getElementById("importFile"),t=e.files[0];if(t){const o=new FileReader;o.addEventListener("load",(function(){let t=JSON.parse(o.result);if(t.length>0){let o=[],r="";for(let e of t)if(""!==e.url&&""!==e.color&&""!==e.label){let t={settingUrl:e.url,settingColor:e.color,settingLabel:e.label,settingPosition:e.position,settingSize:e.size};o.push(t)}else""===e.url&&(r+="<li>"+errorImportUrlEmpty+"</li>"),""===e.label&&(r+="<li>"+errorImportLabelEmpty+"</li>"),""===e.color&&(r+="<li>"+errorImportColorEmpty+"</li>");$(".import-file-label").html(inputChooseFile),e.value="",""!==r?showMessage("<ul>"+r+"</ul>",!0):browser.storage.local.set({[markersKey]:o}).then(()=>{showMessage(noticeSuccessImport)},onError)}})),o.readAsText(t)}else showMessage(errorChooseFile,!0)}$(document).ready(()=>{$("html").attr("lang",languageCode);let e=$(".export"),t=$(".import");e.click(()=>{exportConfig()}),t.click(()=>{importConfig()}),$("#importFile").change(e=>{e.target.files.length&&$(".import-file-label").html(e.target.files[0].name)}),browser.storage.local.get(searchModeKey).then(e=>{let t=e[searchModeKey]||!1;$("#enable-regexp").prop("checked",t)},onError),$("#enable-regexp").change(e=>{let t=$(e.target).is(":checked");browser.storage.local.set({[searchModeKey]:t}).then(()=>{showMessage(noticeSettingSaved)},onError)}),e.html('<i class="fas fa-download fa-lg"></i> '+buttonExport),t.html('<i class="fas fa-upload fa-lg"></i> '+buttonImport),$(".import-file-label").html(inputChooseFile),$("#import-warning").html(importWarning),$("#enable-regexp-label").html(inputEnableRegExp),$("#settings-section-label").html('<i class="fas fa-cog"></i> '+optionsSettingsSection),$("#export-import-section-label").html('<i class="fas fa-sync-alt"></i> '+optionsExportImportSection),$("#font-label").html(inputFontLabel),$("#font-picker-help-block").html(inputFontHelpText),$("#enable-regexp-help-block").html(inputRegExpHelpText),$("#font-picker").fontpicker({lang:languageCodeTwoChar,variants:!0,lazyLoad:!0,showClear:!0,nrRecents:0,localFonts:{Arial:{category:"sans-serif",variants:"400,400i,600,600i"},Georgia:{category:"serif",variants:"400,400i,600,600i"},"Times New Roman":{category:"serif",variants:"400,400i,600,600i"},Verdana:{category:"sans-serif",variants:"400,400i,600,600i"}},localFontsUrl:"/libraries/fontpicker/fonts/",onSelect:function(e){let t=e.fontType+":"+e.fontSpec;browser.storage.local.set({[fontKey]:t}).then(()=>{showMessage(noticeSettingSaved)})}}),browser.storage.local.get(fontKey).then(e=>{let t=e[fontKey]||"";if(t){let e=t.split(":"),o=e[1],r=e[2];$("#font-picker").val(o+":"+r).trigger("change")}}),$(".fp-clear").click(()=>{browser.storage.local.set({[fontKey]:""}).then(()=>{showMessage(noticeSettingSaved)})})});
//# sourceMappingURL=options.min.js.map
