let errorDuplicateMarker=browser.i18n.getMessage("errorDuplicateMarker"),errorLabelEmpty=browser.i18n.getMessage("errorLabelEmpty"),errorUrlEmpty=browser.i18n.getMessage("errorUrlEmpty"),noticeSuccessExport=browser.i18n.getMessage("noticeSuccessExport"),noticeSuccessImport=browser.i18n.getMessage("noticeSuccessImport"),errorNoRibbonsToExport=browser.i18n.getMessage("errorNoRibbonsToExport"),errorChooseFile=browser.i18n.getMessage("errorChooseFile"),inputChooseFile=browser.i18n.getMessage("inputChooseFile"),buttonExport=browser.i18n.getMessage("buttonExport"),buttonImport=browser.i18n.getMessage("buttonImport"),exportFile=null;function onError(e){console.log(e)}function showMessage(e,o=!1){let r=o?"alert-danger":"alert-success";$(".outer-wrapper .message-container .alert").length?($(".outer-wrapper .message-container .alert").remove(),$(".outer-wrapper .message-container").append('<div class="alert '+r+' col-12">'+e+"</div>")):$(".outer-wrapper .message-container").append('<div class="alert '+r+' col-12">'+e+"</div>")}function saveSettings(e,o,r,t){let s=e,n=o,i=r,l=t;""!==s&&""!==n&&""!==i?browser.storage.local.get(s).then(e=>{Object.keys(e).length<1?storeSetting(s,n,i,l):showMessage(errorDuplicateMarker,!0)},onError):showMessage(""===i?errorLabelEmpty:errorUrlEmpty,!0)}function storeSetting(e,o,r,t){browser.storage.local.set({[e]:[o,r,t]}).then(()=>{},onError)}function makeJsonExportFile(e){let o=new Blob([e],{type:"application/json"});return null!==exportFile&&window.URL.revokeObjectURL(exportFile),exportFile=window.URL.createObjectURL(o),exportFile}function exportConfig(){browser.storage.local.get(null).then(e=>{let o=Object.keys(e),r=[];if(o.length>0){for(let t of o)r.push({url:t,color:e[t][0],label:e[t][1],position:e[t][2]});let t=JSON.stringify(r),s=document.createElement("a");s.setAttribute("download","ribbons.json"),s.href=makeJsonExportFile(t),document.body.appendChild(s),window.requestAnimationFrame((function(){let e=new MouseEvent("click");s.dispatchEvent(e),document.body.removeChild(s),showMessage(noticeSuccessExport)}))}else showMessage(errorNoRibbonsToExport,!0)},onError)}function importConfig(){let e=document.getElementById("importFile"),o=e.files[0];if(o){const r=new FileReader;r.addEventListener("load",(function(){let o=JSON.parse(r.result);o.length>0&&(o.forEach((function(e){saveSettings(e.url,e.color,e.label,e.position)})),showMessage(noticeSuccessImport)),$(".import-file-label").html(inputChooseFile),e.value=""})),r.readAsText(o)}else showMessage(errorChooseFile)}$(document).ready(()=>{$(".export").click(()=>{exportConfig()}),$(".import").click(()=>{importConfig()}),$("#importFile").change(e=>{e.target.files.length&&$(".import-file-label").html(e.target.files[0].name)}),$("button.export").html('<i class="fas fa-download fa-lg"></i> '+buttonExport),$("button.import").html('<i class="fas fa-upload fa-lg"></i> '+buttonImport),$(".import-file-label").html(inputChooseFile)});
//# sourceMappingURL=options.min.js.map
