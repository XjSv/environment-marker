let inputUrlFragmentPlaceholder=browser.i18n.getMessage("inputUrlFragmentPlaceholder"),inputColorPlaceholder=browser.i18n.getMessage("inputColorPlaceholder"),inputLabelPlaceholder=browser.i18n.getMessage("inputLabelPlaceholder"),positionInputTopLeft=browser.i18n.getMessage("positionInputTopLeft"),positionInputTopRight=browser.i18n.getMessage("positionInputTopRight"),positionInputBottomLeft=browser.i18n.getMessage("positionInputBottomLeft"),positionInputBottomRight=browser.i18n.getMessage("positionInputBottomRight"),noticeNoRibbons=browser.i18n.getMessage("noticeNoRibbons"),buttonClearAll=browser.i18n.getMessage("buttonClearAll"),buttonImportExport=browser.i18n.getMessage("buttonImportExport"),errorDuplicateMarker=browser.i18n.getMessage("errorDuplicateMarker"),errorLabelEmpty=browser.i18n.getMessage("errorLabelEmpty"),errorUrlEmpty=browser.i18n.getMessage("errorUrlEmpty"),colorPickerUiDialog=browser.i18n.getMessage("colorPickerUiDialog"),colorPickerBtnToggle=browser.i18n.getMessage("colorPickerBtnToggle"),colorPickerBtnSwatch=browser.i18n.getMessage("colorPickerBtnSwatch"),colorPickerBtnLastColor=browser.i18n.getMessage("colorPickerBtnLastColor"),colorPickerBtnSave=browser.i18n.getMessage("colorPickerBtnSave"),colorPickerBtnCancel=browser.i18n.getMessage("colorPickerBtnCancel"),colorPickerBtnClear=browser.i18n.getMessage("colorPickerBtnClear"),colorPickerAriaBtnSave=browser.i18n.getMessage("colorPickerAriaBtnSave"),colorPickerAriaBtnCancel=browser.i18n.getMessage("colorPickerAriaBtnCancel"),colorPickerAriaBtnClear=browser.i18n.getMessage("colorPickerAriaBtnClear"),colorPickerAriaInput=browser.i18n.getMessage("colorPickerAriaInput"),colorPickerAriaPalette=browser.i18n.getMessage("colorPickerAriaPalette"),colorPickerAriaHue=browser.i18n.getMessage("colorPickerAriaHue"),colorPickerAriaOpacity=browser.i18n.getMessage("colorPickerAriaOpacity"),pickr=null;const hide="none",show="block",positionsMap=[{value:"top-left",label:positionInputTopLeft},{value:"top-right",label:positionInputTopRight},{value:"bottom-left",label:positionInputBottomLeft},{value:"bottom-right",label:positionInputBottomRight}];function onError(e){console.log(e)}function truncateString(e,t){return e.length<=t?e:e.slice(0,t)+"..."}function initialize(){browser.storage.local.get(null).then(e=>{let t=Object.keys(e);t.length>0?showOrHideEmptyNotice(hide):showOrHideEmptyNotice(show);for(let o of t)displaySetting(o,e[o][0],e[o][1],e[o][2])},onError)}function showOrHideEmptyNotice(e=null){e!==show&&e!==hide?browser.storage.local.get(null).then(e=>{let t=Object.keys(e);$(".empty-notice").css("display",t.length>0?"none":"block")},onError):$(".empty-notice").css("display",e)}function showMessage(e,t=!1){let o=t?"alert-danger":"alert-success";$(".outer-wrapper .message-container .alert").length?($(".outer-wrapper .message-container .alert").remove(),$(".outer-wrapper .message-container").append('<div class="alert '+o+' col-12">'+e+"</div>")):$(".outer-wrapper .message-container").append('<div class="alert '+o+' col-12">'+e+"</div>")}function saveSettings(){let e=$(".settings-input #url").val(),t=pickr.getSelectedColor().toHEXA().toString(0),o=$(".settings-input #label").val(),r=$(".settings-input #position").val();""!==e&&""!==t&&""!==o?browser.storage.local.get(e).then(i=>{Object.keys(i).length<1?($(".outer-wrapper .message-container .alert").length&&$(".outer-wrapper .message-container .alert").remove(),$(".settings-input #url").val(""),$(".settings-input #label").val(""),$(".settings-input #position").val("top-left"),storeSetting(e,t,o,r)):showMessage(errorDuplicateMarker)},onError):showMessage(""===o?errorLabelEmpty:errorUrlEmpty)}function storeSetting(e,t,o,r){browser.storage.local.set({[e]:[t,o,r]}).then(()=>{showOrHideEmptyNotice(hide),displaySetting(e,t,o,r)},onError)}function displaySetting(e,t,o,r){let i=positionsMap.reduce((function(e,t){return t.value==r&&(e=t.label),e}),{}),a=$("<div/>",{class:"setting"}),n=$("<div/>",{class:"row no-gutters mb-2 display-container"}),l=$("<div/>",{class:"col-10 pr-2 display-labelUrl",text:truncateString(o,35)+" ("+truncateString(e,35)+") at "+i,click:function(){n.hide(),g.show()}}),c=$("<div/>",{class:"col-1 pr-2 display-color",html:'<div style="background-color: '+t+';"></div>',click:function(){n.hide(),g.show()}}),s=$("<div/>",{class:"col-1 display-delete"}),p=$("<button/>",{class:"btn btn-danger btn-sm delete",html:'<i class="fas fa-trash fa-lg"></i>',click:function(){$(this).parent().parent().parent().remove(),browser.storage.local.remove(e),showOrHideEmptyNotice()}}),g=$("<div/>",{class:"row no-gutters mb-2 edit-container",style:"display: none;"}),u=$("<div/>",{class:"col-10 pr-1 mb-2 edit-url-container"}),b=$("<input/>",{class:"form-control edit-url",value:e}),d=$("<div/>",{class:"col-1 pr-1 mb-2 edit-color"}),h=$("<input/>",{class:"color-picker",value:t}),k=$("<div/>",{class:"col-1 mb-2 edit-delete"}),m=$("<button/>",{class:"btn btn-success btn-sm update",html:'<i class="fas fa-pencil-alt fa-lg"></i>',click:function(){let i=b.val(),n=h.val(),l=w.val(),c=y.val();i===e&&n===t&&l===o&&c===r||(updateSetting(e,i,n,l,c),a.remove())}}),v=$("<div/>",{class:"col-6 pr-2 edit-label-container"}),w=$("<input/>",{class:"form-control edit-label",value:o}),P=$("<div/>",{class:"col-5 pr-2 edit-position-container"}),y=$("<select/>",{class:"form-control edit-position"});for(let e=0;e<positionsMap.length;e++)positionsMap[e].value===r?y.append(new Option(positionsMap[e].label,positionsMap[e].value,!0,!0)):y.append(new Option(positionsMap[e].label,positionsMap[e].value));let f=$("<div/>",{class:"col-1 edit-cancel"}),B=$("<button/>",{class:"btn btn-secondary btn-sm cancel",html:'<i class="fas fa-times fa-lg"></i>',click:function(){n.show(),g.hide(),b.val(e),h.val(t),w.val(o),y.val(r)}});u.append(b),d.append(h),P.append(y),k.append(m),v.append(w),f.append(B),g.append(u),g.append(d),g.append(k),g.append(v),g.append(P),g.append(f),s.append(p),n.append(l),n.append(c),n.append(s),a.append(n),a.append(g),$(".settings-container").append(a),Pickr.create({el:h[0],theme:"nano",default:t,useAsButton:!1,swatches:["rgba(244, 67,  54, 1)","rgba(233, 30,  99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63,  81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3,  169, 244, 1)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}},i18n:{"ui:dialog":colorPickerUiDialog,"btn:toggle":colorPickerBtnToggle,"btn:swatch":colorPickerBtnSwatch,"btn:last-color":colorPickerBtnLastColor,"btn:save":colorPickerBtnSave,"btn:cancel":colorPickerBtnCancel,"btn:clear":colorPickerBtnClear,"aria:btn:save":colorPickerAriaBtnSave,"aria:btn:cancel":colorPickerAriaBtnCancel,"aria:btn:clear":colorPickerAriaBtnClear,"aria:input":colorPickerAriaInput,"aria:palette":colorPickerAriaPalette,"aria:hue":colorPickerAriaHue,"aria:opacity":colorPickerAriaOpacity}}).on("save",(e,t)=>{h.val(e.toHEXA().toString(0)),t.hide()})}function updateSetting(e,t,o,r,i){browser.storage.local.set({[t]:[o,r,i]}).then(()=>{e!==t?browser.storage.local.remove(e).then(()=>{displaySetting(t,o,r,i)},onError):displaySetting(t,o,r,i)},onError)}function clearAll(){$(".settings-container .setting").each((e,t)=>{t.remove()}),browser.storage.local.clear(),showOrHideEmptyNotice(show)}$(document).ready(()=>{initialize(),$(".save").click(()=>{saveSettings()}),$(".clear").click(()=>{clearAll()}),$(".import-export").click(()=>{browser.runtime.openOptionsPage()}),$(document).keydown((function(e){if("Enter"!==e.key&&"NumpadEnter"!==e.key||saveSettings(),"Escape"!==e.key)return!0;window.close()})),pickr=Pickr.create({el:".color-picker",theme:"nano",useAsButton:!1,swatches:["rgba(244, 67,  54, 1)","rgba(233, 30,  99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63,  81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3,  169, 244, 1)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}},i18n:{"ui:dialog":colorPickerUiDialog,"btn:toggle":colorPickerBtnToggle,"btn:swatch":colorPickerBtnSwatch,"btn:last-color":colorPickerBtnLastColor,"btn:save":colorPickerBtnSave,"btn:cancel":colorPickerBtnCancel,"btn:clear":colorPickerBtnClear,"aria:btn:save":colorPickerAriaBtnSave,"aria:btn:cancel":colorPickerAriaBtnCancel,"aria:btn:clear":colorPickerAriaBtnClear,"aria:input":colorPickerAriaInput,"aria:palette":colorPickerAriaPalette,"aria:hue":colorPickerAriaHue,"aria:opacity":colorPickerAriaOpacity}}),pickr.on("save",(e,t)=>{t.hide()}),$(".empty-notice").html(noticeNoRibbons),$(".clear").html(buttonClearAll),$(".import-export").html(buttonImportExport),$("#url").attr("placeholder",inputUrlFragmentPlaceholder),$("#color").attr("placeholder",inputColorPlaceholder),$("#label").attr("placeholder",inputLabelPlaceholder),$('#position option[value="top-left"]').html(positionInputTopLeft),$('#position option[value="top-right"]').html(positionInputTopRight),$('#position option[value="bottom-left"]').html(positionInputBottomLeft),$('#position option[value="bottom-right"]').html(positionInputBottomRight)});
//# sourceMappingURL=environment-marker.min.js.map
