let positionInputTopLeft=browser.i18n.getMessage("positionInputTopLeft"),positionInputTopRight=browser.i18n.getMessage("positionInputTopRight"),positionInputBottomLeft=browser.i18n.getMessage("positionInputBottomLeft"),positionInputBottomRight=browser.i18n.getMessage("positionInputBottomRight"),noticeNoRibbons=browser.i18n.getMessage("noticeNoRibbons"),buttonClearAll=browser.i18n.getMessage("buttonClearAll"),buttonImportExport=browser.i18n.getMessage("buttonImportExport"),errorDuplicateMarker=browser.i18n.getMessage("errorDuplicateMarker"),errorLabelEmpty=browser.i18n.getMessage("errorLabelEmpty"),errorUrlEmpty=browser.i18n.getMessage("errorUrlEmpty"),pickr=null;const hide="none",show="block",positionsMap=[{value:"top-left",label:positionInputTopLeft},{value:"top-right",label:positionInputTopRight},{value:"bottom-left",label:positionInputBottomLeft},{value:"bottom-right",label:positionInputBottomRight}];function onError(t){console.log(t)}function truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}function initialize(){browser.storage.local.get(null).then(t=>{let e=Object.keys(t);e.length>0?showOrHideEmptyNotice(hide):showOrHideEmptyNotice(show);for(let o of e)displaySetting(o,t[o][0],t[o][1],t[o][2])},onError)}function showOrHideEmptyNotice(t=null){t!==show&&t!==hide?browser.storage.local.get(null).then(t=>{let e=Object.keys(t);$(".empty-notice").css("display",e.length>0?"none":"block")},onError):$(".empty-notice").css("display",t)}function showMessage(t,e=!1){let o=e?"alert-danger":"alert-success";$(".outer-wrapper .message-container .alert").length?($(".outer-wrapper .message-container .alert").remove(),$(".outer-wrapper .message-container").append('<div class="alert '+o+' col-12">'+t+"</div>")):$(".outer-wrapper .message-container").append('<div class="alert '+o+' col-12">'+t+"</div>")}function saveSettings(){let t=$(".settings-input #url").val(),e=pickr.getSelectedColor().toHEXA().toString(0),o=$(".settings-input #label").val(),n=$(".settings-input #position").val();""!==t&&""!==e&&""!==o?browser.storage.local.get(t).then(i=>{Object.keys(i).length<1?($(".outer-wrapper .message-container .alert").length&&$(".outer-wrapper .message-container .alert").remove(),$(".settings-input #url").val(""),$(".settings-input #label").val(""),$(".settings-input #position").val("top-left"),storeSetting(t,e,o,n)):showMessage(errorDuplicateMarker)},onError):showMessage(""===o?errorLabelEmpty:errorUrlEmpty)}function storeSetting(t,e,o,n){browser.storage.local.set({[t]:[e,o,n]}).then(()=>{showOrHideEmptyNotice(hide),displaySetting(t,e,o,n)},onError)}function displaySetting(t,e,o,n){let i=positionsMap.reduce((function(t,e){return e.value==n&&(t=e.label),t}),{}),s=$("<div/>",{class:"setting"}),r=$("<div/>",{class:"row no-gutters mb-2 display-container"}),a=$("<div/>",{class:"col-10 pr-2 display-labelUrl",text:truncateString(o,35)+" ("+truncateString(t,35)+") at "+i,click:function(){r.hide(),g.show()}}),l=$("<div/>",{class:"col-1 pr-2 display-color",html:'<div style="background-color: '+e+';"></div>',click:function(){r.hide(),g.show()}}),p=$("<div/>",{class:"col-1 display-delete"}),c=$("<button/>",{class:"btn btn-danger btn-sm delete",html:'<i class="fas fa-trash fa-lg"></i>',click:function(){$(this).parent().parent().parent().remove(),browser.storage.local.remove(t),showOrHideEmptyNotice()}}),g=$("<div/>",{class:"row no-gutters mb-2 edit-container",style:"display: none;"}),u=$("<div/>",{class:"col-10 pr-1 mb-2 edit-url-container"}),d=$("<input/>",{class:"form-control edit-url",value:t}),b=$("<div/>",{class:"col-1 pr-1 mb-2 edit-color"}),m=$("<input/>",{class:"color-picker",value:e}),h=$("<div/>",{class:"col-1 mb-2 edit-delete"}),v=$("<button/>",{class:"btn btn-success btn-sm update",html:'<i class="fas fa-pencil-alt fa-lg"></i>',click:function(){let i=d.val(),r=m.val(),a=f.val(),l=k.val();i===t&&r===e&&a===o&&l===n||(updateSetting(t,i,r,a,l),s.remove())}}),w=$("<div/>",{class:"col-6 pr-2 edit-label-container"}),f=$("<input/>",{class:"form-control edit-label",value:o}),y=$("<div/>",{class:"col-5 pr-2 edit-position-container"}),k=$("<select/>",{class:"form-control edit-position"});for(let t=0;t<positionsMap.length;t++)positionsMap[t].value===n?k.append(new Option(positionsMap[t].label,positionsMap[t].value,!0,!0)):k.append(new Option(positionsMap[t].label,positionsMap[t].value));let E=$("<div/>",{class:"col-1 edit-cancel"}),M=$("<button/>",{class:"btn btn-secondary btn-sm cancel",html:'<i class="fas fa-times fa-lg"></i>',click:function(){r.show(),g.hide(),d.val(t),m.val(e),f.val(o),k.val(n)}});u.append(d),b.append(m),y.append(k),h.append(v),w.append(f),E.append(M),g.append(u),g.append(b),g.append(h),g.append(w),g.append(y),g.append(E),p.append(c),r.append(a),r.append(l),r.append(p),s.append(r),s.append(g),$(".settings-container").append(s),Pickr.create({el:m[0],theme:"nano",default:e,useAsButton:!1,swatches:["rgba(244, 67,  54, 1)","rgba(233, 30,  99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63,  81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3,  169, 244, 1)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}}).on("save",(t,e)=>{m.val(t.toHEXA().toString(0)),e.hide()})}function updateSetting(t,e,o,n,i){browser.storage.local.set({[e]:[o,n,i]}).then(()=>{t!==e?browser.storage.local.remove(t).then(()=>{displaySetting(e,o,n,i)},onError):displaySetting(e,o,n,i)},onError)}function clearAll(){$(".settings-container .setting").each((t,e)=>{e.remove()}),browser.storage.local.clear(),showOrHideEmptyNotice(show)}$(document).ready(()=>{initialize(),$(".save").click(()=>{saveSettings()}),$(".clear").click(()=>{clearAll()}),$(".import-export").click(()=>{browser.runtime.openOptionsPage()}),$(document).keydown((function(t){if("Enter"!==t.key&&"NumpadEnter"!==t.key||saveSettings(),"Escape"!==t.key)return!0;window.close()})),pickr=Pickr.create({el:".color-picker",theme:"nano",useAsButton:!1,swatches:["rgba(244, 67,  54, 1)","rgba(233, 30,  99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63,  81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3,  169, 244, 1)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}}),pickr.on("save",(t,e)=>{e.hide()}),$("span.empty-notice").html(noticeNoRibbons),$("button.clear").html(buttonClearAll),$("button.import-export").html(buttonImportExport),$('select#position option[value="top-left"]').html(positionInputTopLeft),$('select#position option[value="top-right"]').html(positionInputTopRight),$('select#position option[value="bottom-left"]').html(positionInputBottomLeft),$('select#position option[value="bottom-right"]').html(positionInputBottomRight)});
//# sourceMappingURL=environment-marker.min.js.map
