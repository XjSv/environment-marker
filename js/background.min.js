const TAB_COUNT_COLOR_LIMIT=10,TAB_COUNT_COLOR_LOW="#28a745",TAB_COUNT_COLOR_HIGH="#dc3545";function onError(e){console.log(e)}function updateCount(e,o){browser.tabs.query({}).then(r=>{let t=r.length;o&&e&&r.map(e=>e.id).includes(e)&&t--,browser.browserAction.setBadgeText({text:t.toString()}),t>10?browser.browserAction.setBadgeBackgroundColor({color:"#dc3545"}):browser.browserAction.setBadgeBackgroundColor({color:"#28a745"})})}function updateContent(e){void 0!==e&&browser.tabs.get(e).then(o=>{""!==o.url&&browser.storage.local.get(null).then(r=>{let t=Object.keys(r);for(let n of t)-1!==o.url.indexOf(n)&&(browser.tabs.executeScript(e,{file:"/js/content.min.js"}).then(()=>{browser.tabs.sendMessage(e,{command:"addRibbon",url:n,color:r[n][0],label:r[n][1],position:r[n][2],size:r[n][3]}).then(e=>{}).catch(onError)},onError),browser.tabs.insertCSS(e,{file:"/css/content.min.css"}).then(null,onError))},onError)},onError)}browser.tabs.onRemoved.addListener(e=>{updateCount(e,!0)}),browser.tabs.onCreated.addListener(e=>{updateCount(e,!1)}),browser.tabs.onUpdated.addListener(e=>{updateContent(e)}),updateCount(),updateContent();
//# sourceMappingURL=background.min.js.map
