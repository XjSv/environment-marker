const TAB_COUNT_COLOR_LIMIT=10,TAB_COUNT_COLOR_LOW="#28a745",TAB_COUNT_COLOR_HIGH="#dc3545";function onError(e){console.log(e)}function updateCount(e,o){browser.tabs.query({}).then(t=>{let r=t.length;o&&e&&t.map(e=>e.id).includes(e)&&r--,browser.browserAction.setBadgeText({text:r.toString()}),r>10?browser.browserAction.setBadgeBackgroundColor({color:"#dc3545"}):browser.browserAction.setBadgeBackgroundColor({color:"#28a745"})})}function updateContent(e){void 0!==e&&browser.tabs.get(e).then(o=>{""!==o.url&&browser.storage.local.get(null).then(t=>{let r=Object.keys(t);for(let n of r)-1!==o.url.indexOf(n)&&(browser.tabs.executeScript(e,{file:"/js/content.min.js"}).then(()=>{browser.tabs.sendMessage(e,{command:"addRibbon",url:n,color:t[n][0],label:t[n][1],position:t[n][2]}).then(e=>{console.log("Message from the content script:"),console.log(e.response)}).catch(onError)},onError),browser.tabs.insertCSS(e,{file:"/css/content.min.css"}).then(null,onError))},onError)},onError)}browser.tabs.onRemoved.addListener(e=>{updateCount(e,!0)}),browser.tabs.onCreated.addListener(e=>{updateCount(e,!1)}),browser.tabs.onUpdated.addListener(e=>{updateContent(e)}),updateCount(),updateContent();
//# sourceMappingURL=background.min.js.map
